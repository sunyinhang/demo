<style type="text/css">
	.add_photo{ position: relative; float: left; margin-top: 1rem; margin-bottom: 1rem; width:50%; height:5.95rem; text-align:center; }
	.add_photoImg,.add_photoFile{ position:absolute; left:50%; margin-left:-2.875rem; width: 5.75rem; height:5.95rem;}
	.add_photoImg img { width: 100%; height:100%;    }
	.add_photoFile input{ width:100%; height:100%; opacity: 0; }

	#div1{ }
    #div1 div.list-photo{ float:left; position: relative; margin-top: 1rem; margin-bottom: 1rem; width:50%; height:5.95rem;}
    #div1 div.list-photo-inner{ position: relative; margin:0 auto; width: 5.75rem; height:5.95rem; text-align: center;}
	#div1 img{  width: 100%; height:100%;}
	#div1 span{ z-index:999; cursor:pointer; position: absolute; top: 0px; right: 0; display: inline-block; width:1.1rem; height: 1.1rem; background:url(images/applyQuota/close_btn.png) no-repeat center; background-size:1.1rem;  }
</style>
<div class="padding16">
	<div class="bg-bd">
	<form enctype="multipart/form-data" id="handForm" name="handForm" ms-validate="@validate">
		<div class="add_photo">
			<div class="add_photoImg">
				<img src="images/applyQuota/add_photo.png" />
			</div>
			<div class="add_photoFile">
				<input type="file" class="upload" id="uploadImage">
			</div>
		</div>
		<div id="div1">
<!--             <div class='list-photo'>
                <div class="list-photo-inner">
                    <img src="images/applyQuota/pander.png" alt="">
                    <span></span>
                </div>
            </div> -->
            <div class="clear"></div>  
		</div>
	</form>
	</div>
</div>

    <script type="text/javascript">
        var _URL = window.URL || window.webkitURL;
        $(function () {
            var imgobj = {};
            var formData = new FormData();
            $("#uploadImage").on('change', function () {
                debugger
                var file, img, imgName, src, src2, reader;
                if ((file = this.files[0])) {
                    //生成图片唯一名字 方便删除
                    imgName = "file" + (new Date).getTime();
                    //把图片内容放到formdata中保存，key/value形式
                    formData.append(imgName, file);//formData对象
                    //获取img的src用于展示
                    src = _URL.createObjectURL(file);//把这个url放到上面展示
                    img = document.createElement("img");
                    img.src = src;
                    //img.width = 100;//设置图片宽
                    //img.height = 100;//设置图片高

                    $("#div1").prepend('<div class="list-photo">'+
                                            '<div class="list-photo-inner">'+
                                                '<span class="delete_img" data-id="'+imgName+'"></span>'+
                                            '</div>'+
                                        '</div>');

                    $("#div1 .list-photo-inner:first").append(img);

                    //$("#div1").append("<span class='delete_img' data-id='" + imgName + "'>删除</span>");//添加一个删除按钮*/

                    var reader = new FileReader();
                    reader.onload = function (e) {
                        imgobj[imgName] = this.result;//存储图片到对象中
                    }
                    reader.readAsDataURL(file);
                }
            });
            //点击删除按钮
            $(document).on("click", ".delete_img", function () {                
                   _selfImgName = $(this).attr("data-id");

                $(this).next().remove();
                $(this).remove();//移除图片自己

                delete imgobj[_selfImgName];//删除对象中的属性

                // console.log(formData.get(_selfImgName)); 移除前
                formData.delete(_selfImgName);//移除formdata中的数据
                //console.log(formData.get(_selfImgName));  移除后

            });
        });
    </script>
